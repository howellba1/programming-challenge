(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.jiboProgrammingChallenge = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/// <reference path="../typings/index.d.ts" />
"use strict";
var PIXI = require('pixi.js');
var renderer = new PIXI.WebGLRenderer(1280, 720);
document.body.appendChild(renderer.view);
/*
 Programming challenge test created by Brian Howell 3/17/2017;
*/
// You need to create a root container that will hold the scene you want to draw.
var stage = new PIXI.Container();
var masterArray = [];
var xyArray = [];
var checkerStartPos = 0;
var max_x = 0;
var max_y = 0;
var numberOfSquares = 36;
var block_size = 102;
var RowAmount = Math.sqrt(numberOfSquares);
var startStop = true;
//checker image;
var checker = new PIXI.Sprite(PIXI.Texture.fromImage('images/checker.png'));
//some audio;
var bloop = new Audio('audio/FX_Bloop.mp3');
var blip = new Audio('audio/FX_Blip.mp3');
//some text
var style = new PIXI.TextStyle({
    fontFamily: 'Arial',
    fontSize: 36,
    fontStyle: 'italic',
    //fontWeight: 'bold',
    fill: ['#ffffff', '#00ff99'],
    stroke: '#4a1850',
    strokeThickness: 5,
    dropShadow: true,
    dropShadowColor: '#000000',
    dropShadowBlur: 4,
    dropShadowAngle: Math.PI / 6,
    dropShadowDistance: 6,
    wordWrap: true,
    wordWrapWidth: 440
});
var basicText = new PIXI.Text('Click checker to start.\n\nClick shuffle to restart.', style);
basicText.x = 100;
basicText.y = 120;
//load UI images;
addStartUI();
addStopUI();
addshuffleUI();
add5x5UI();
add6x6UI();
buildBoard();
addTextUI();
animate();
function animate() {
    // start the timer for the next animation loop
    requestAnimationFrame(animate);
    // this is the main render call that makes pixi draw your container and its children.
    renderer.render(stage);
}
// main function for moving the checker based on arrow direction;
function startMoving() {
    if (startStop) {
        moveChecker(masterArray, checkerStartPos);
        // set move rate to half a second;
        setTimeout(startMoving, 500);
    }
}
function addTextUI() {
    //load start text instructions;
    stage.addChild(basicText);
}
function addStartUI() {
    var _start = PIXI.Texture.fromImage('images/run.jpg');
    var btn = new PIXI.Sprite(_start);
    btn.position.x = 50;
    btn.position.y = 10;
    btn.interactive = true;
    btn.buttonMode = true;
    btn.on('pointerdown', run);
    stage.addChild(btn);
}
function addStopUI() {
    var _stop = PIXI.Texture.fromImage('images/pause.jpg');
    var btn = new PIXI.Sprite(_stop);
    btn.position.x = 120;
    btn.position.y = 10;
    btn.interactive = true;
    btn.buttonMode = true;
    btn.on('pointerdown', pause);
    stage.addChild(btn);
}
function addshuffleUI() {
    var _shuffle = PIXI.Texture.fromImage('images/shuffle.jpg');
    var btn = new PIXI.Sprite(_shuffle);
    btn.position.x = 250;
    btn.position.y = 10;
    btn.interactive = true;
    btn.buttonMode = true;
    btn.on('pointerdown', buildBoard);
    stage.addChild(btn);
}
function add5x5UI() {
    var _5x5 = PIXI.Texture.fromImage('images/5x5.jpg');
    var btn = new PIXI.Sprite(_5x5);
    btn.position.x = 400;
    btn.position.y = 10;
    btn.interactive = true;
    btn.buttonMode = true;
    btn.on('pointerdown', fiveBy);
    stage.addChild(btn);
}
function add6x6UI() {
    var _6x6 = PIXI.Texture.fromImage('images/6x6.jpg');
    var btn = new PIXI.Sprite(_6x6);
    btn.position.x = 500;
    btn.position.y = 10;
    btn.interactive = true;
    btn.buttonMode = true;
    btn.on('pointerdown', sixBy);
    stage.addChild(btn);
}
function buildBoard() {
    var blocks = new PIXI.Sprite(PIXI.Texture.fromImage('images/up_arrow.jpg'));
    // remove all sprites after the UI buttons;
    removeRange(5, numberOfSquares + 6);
    // Create a grid of squares;
    for (var i = 0; i < numberOfSquares; i++) {
        //replace the arrow image based on the random selecton 0-3;
        blocks = loadRandomArrow(i);
        blocks.anchor.set(0);
        blocks.position.x = ((i % RowAmount) * block_size) + 20;
        blocks.position.y = (Math.floor(i / RowAmount) * block_size) + 40;
        xyArray[i] = [blocks.position.x, blocks.position.y];
        stage.addChild(blocks);
    }
    // store the max positions for limits;
    max_x = blocks.position.x;
    max_y = blocks.position.y;
    addChecker();
}
function loadRandomArrow(blockNum) {
    // pick the arrow based on the random number;
    var min = 0;
    var max = 3;
    var ab = Math.floor(Math.random() * (max - min + 1) + min);
    if (ab == 0) {
        masterArray[blockNum] = 0;
        return new PIXI.Sprite(PIXI.Texture.fromImage('images/up_arrow.jpg'));
    }
    else if (ab == 1) {
        masterArray[blockNum] = 1;
        return new PIXI.Sprite(PIXI.Texture.fromImage('images/dn_arrow.jpg'));
    }
    else if (ab == 2) {
        masterArray[blockNum] = 2;
        return new PIXI.Sprite(PIXI.Texture.fromImage('images/left_arrow.jpg'));
    }
    else if (ab == 3) {
        masterArray[blockNum] = 3;
        return new PIXI.Sprite(PIXI.Texture.fromImage('images/right_arrow.jpg'));
    }
}
;
function addChecker() {
    var ranPos = setRandomStartPoint();
    stage.removeChild(basicText);
    checker.anchor.set(0);
    checker.position.x = ranPos[0] + 26;
    checker.position.y = ranPos[1] + 46;
    checker.interactive = true;
    checker.buttonMode = true;
    checker.on('pointerdown', run);
    stage.addChild(checker);
}
function run() {
    startStop = true;
    stage.removeChild(basicText);
    startMoving();
}
function pause() {
    startStop = false;
}
function removeRange(s, e) {
    // clear the sprites so we can start over;
    stage.removeChildren(s, e);
}
function fiveBy() {
    numberOfSquares = 25;
    RowAmount = Math.sqrt(numberOfSquares);
    removeRange(5, numberOfSquares + 6);
    buildBoard();
}
function sixBy() {
    numberOfSquares = 36;
    RowAmount = Math.sqrt(numberOfSquares);
    removeRange(5, numberOfSquares + 6);
    buildBoard();
}
function setRandomStartPoint() {
    // returns an array with the x and y location of the random start point;
    var xyArray = [];
    var min = 5;
    var max = numberOfSquares;
    var rand = Math.random() * (max - min + 1) + min;
    var ab = Math.floor(rand);
    for (var i = 0; i < numberOfSquares; i++) {
        if (i == ab) {
            xyArray[0] = ((i % RowAmount) * block_size) + 26;
            xyArray[1] = (Math.floor(i / RowAmount) * block_size) + 26;
            checkerStartPos = i;
            break;
        }
    }
    return xyArray;
}
function moveChecker(_pos, _checkerStartPos) {
    var nPos = xyArray;
    // move checker to a new position based on the index number 0=up 1 = down 2=left 3=right;
    if (_pos[_checkerStartPos] == 0) {
        checker.position.y = checker.position.y - block_size;
    }
    else if (_pos[_checkerStartPos] == 1) {
        checker.position.y = checker.position.y + block_size;
    }
    else if (_pos[_checkerStartPos] == 2) {
        checker.position.x = checker.position.x - block_size;
    }
    else if (_pos[_checkerStartPos] == 3) {
        checker.position.x = checker.position.x + block_size;
    }
    //check limits. If it goes off the board add a new checker in a random positon;
    if (checker.position.x > max_x + block_size) {
        blip.play();
        addChecker();
        return;
    }
    else if (checker.position.y > max_y + block_size) {
        blip.play();
        addChecker();
        return;
    }
    else if (checker.position.x < 0) {
        blip.play();
        addChecker();
        return;
    }
    else if (checker.position.y < 0) {
        blip.play();
        addChecker();
        return;
    }
    for (var i = 0; i < xyArray.length; i++) {
        var posXY = xyArray[i];
        //determine the arrow block index number based on the new x y position of the checker;
        if ((posXY[0] <= checker.position.x && checker.position.x <= posXY[0] + block_size) && (posXY[1] <= checker.position.y && checker.position.y <= posXY[1] + block_size)) {
            //set the new index position value;
            checkerStartPos = i;
            bloop.play();
            break;
        }
    }
}
},{"pixi.js":undefined}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsOENBQThDOztBQUU5QyxJQUFPLElBQUksV0FBVyxTQUFTLENBQUMsQ0FBQztBQUNqQyxJQUFNLFFBQVEsR0FBc0IsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN0RSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFekM7O0VBRUU7QUFFRixpRkFBaUY7QUFDakYsSUFBTSxLQUFLLEdBQWtCLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBRWxELElBQUksV0FBVyxHQUFHLEVBQUUsQ0FBQztBQUNyQixJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7QUFDakIsSUFBSSxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNkLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNkLElBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUN6QixJQUFJLFVBQVUsR0FBRyxHQUFHLENBQUM7QUFDckIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMzQyxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFFckIsZ0JBQWdCO0FBQ2hCLElBQUksT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7QUFDNUUsYUFBYTtBQUNiLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDNUMsSUFBSSxJ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QUVELEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFDLENBQUMsRUFBQyxDQUFDLEdBQUMsT0FBTyxDQUFDLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBQyxDQUFDO1FBQ2hDLElBQUksS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixzRkFBc0Y7UUFDdEYsRUFBRSxDQUFBLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFBLENBQUM7WUFDbkssbUNBQW1DO1lBQ25DLGVBQWUsR0FBRyxDQUFDLENBQUM7WUFDcEIsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2IsS0FBSyxDQUFDO1FBQ1IsQ0FBQztJQUNILENBQUM7QUFFTCxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL2luZGV4LmQudHNcIiAvPlxuXG5pbXBvcnQgUElYSSA9IHJlcXVpcmUoJ3BpeGkuanMnKTtcbmNvbnN0IHJlbmRlcmVyOlBJWEkuV2ViR0xSZW5kZXJlciA9IG5ldyBQSVhJLldlYkdMUmVuZGVyZXIoMTI4MCwgNzIwKTtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIudmlldyk7XG5cbi8qXG4gUHJvZ3JhbW1pbmcgY2hhbGxlbmdlIHRlc3QgY3JlYXRlZCBieSBCcmlhbiBIb3dlbGwgMy8xNy8yMDE3O1xuKi9cblxuLy8gWW91IG5lZWQgdG8gY3JlYXRlIGEgcm9vdCBjb250YWluZXIgdGhhdCB3aWxsIGhvbGQgdGhlIHNjZW5lIHlvdSB3YW50IHRvIGRyYXcuXG5jb25zdCBzdGFnZTpQSVhJLkNvbnRhaW5lciA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuXG52YXIgbWFzdGVyQXJyYXkgPSBbXTtcbnZhciB4eUFycmF5ID0gW107XG52YXIgY2hlY2tlclN0YXJ0UG9zID0gMDtcbnZhciBtYXhfeCA9IDA7XG52YXIgbWF4X3kgPSAwO1xudmFyIG51bWJlck9mU3F1YXJlcyA9IDM2O1xudmFyIGJsb2NrX3NpemUgPSAxMDI7XG52YXIgUm93QW1vdW50ID0gTWF0aC5zcXJ0KG51bWJlck9mU3F1YXJlcyk7XG52YXIgc3RhcnRTdG9wID0gdHJ1ZTtcblxuLy9jaGVja2VyIGltYWdlO1xudmFyIGNoZWNrZXIgPSBuZXcgUElYSS5TcHJpdGUoUElYSS5UZXh0dXJlLmZyb21JbWFnZSgnaW1hZ2VzL2NoZWNrZXIucG5nJykpO1xuLy9zb21lIGF1ZGlvO1xudmFyIGJsb29wID0gbmV3IEF1ZGlvKCdhdWRpby9GWF9CbG9vcC5tcDMnKTtcbnZhciBibGlwID0gbmV3IEF1ZGlvKCdhdWRpby9GWF9CbGlwLm1wMycpO1xuLy9zb21lIHRleHRcbnZhciBzdHlsZSA9IG5ldyBQSVhJLlRleHRTdHlsZSh7XG4gIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gIGZvbnRTaXplOiAzNixcbiAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgLy9mb250V2VpZ2h0OiAnYm9sZCcsXG4gIGZpbGw6IFsnI2ZmZmZmZicsICcjMDBmZjk5J10sIC8vIGdyYWRpZW50XG4gIHN0cm9rZTogJyM0YTE4NTAnLFxuICBzdHJva2VUaGlja25lc3M6IDUsXG4gIGRyb3BTaGFkb3c6IHRydWUsXG4gIGRyb3BTaGFkb3dDb2xvcjogJyMwMDAwMDAnLFxuICBkcm9wU2hhZG93Qmx1cjogNCxcbiAgZHJvcFNoYWRvd0FuZ2xlOiBNYXRoLlBJIC8gNixcbiAgZHJvcFNoYWRvd0Rpc3RhbmNlOiA2LFxuICB3b3JkV3JhcDogdHJ1ZSxcbiAgd29yZFdyYXBXaWR0aDogNDQwXG59KTtcbnZhciBiYXNpY1RleHQgPSBuZXcgUElYSS5UZXh0KCdDbGljayBjaGVja2VyIHRvIHN0YXJ0LlxcblxcbkNsaWNrIHNodWZmbGUgdG8gcmVzdGFydC4nLHN0eWxlKTtcbmJhc2ljVGV4dC54ID0gMTAwO1xuYmFzaWNUZXh0LnkgPSAxMjA7XG5cbi8vbG9hZCBVSSBpbWFnZXM7XG5hZGRTdGFydFVJKCk7XG5hZGRTdG9wVUkoKTtcbmFkZHNodWZmbGVVSSgpO1xuYWRkNXg1VUkoKTtcbmFkZDZ4NlVJKCk7XG5cbmJ1aWxkQm9hcmQoKTtcbmFkZFRleHRVSSgpO1xuXG5hbmltYXRlKCk7XG5cbmZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gIC8vIHN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIG5leHQgYW5pbWF0aW9uIGxvb3BcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgIC8vIHRoaXMgaXMgdGhlIG1haW4gcmVuZGVyIGNhbGwgdGhhdCBtYWtlcyBwaXhpIGRyYXcgeW91ciBjb250YWluZXIgYW5kIGl0cyBjaGlsZHJlbi5cbiAgcmVuZGVyZXIucmVuZGVyKHN0YWdlKTtcbn1cblxuLy8gbWFpbiBmdW5jdGlvbiBmb3IgbW92aW5nIHRoZSBjaGVja2VyIGJhc2VkIG9uIGFycm93IGRpcmVjdGlvbjtcbmZ1bmN0aW9uIHN0YXJ0TW92aW5nKCl7XG4gIGlmKHN0YXJ0U3RvcCl7XG4gICAgbW92ZUNoZWNrZXIobWFzdGVyQXJyYXksY2hlY2tlclN0YXJ0UG9zKTtcbiAgICAvLyBzZXQgbW92ZSByYXRlIHRvIGhhbGYgYSBzZWNvbmQ7XG4gICAgc2V0VGltZW91dChzdGFydE1vdmluZyw1MDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZFRleHRVSSgpe1xuICAvL2xvYWQgc3RhcnQgdGV4dCBpbnN0cnVjdGlvbnM7XG4gIHN0YWdlLmFkZENoaWxkKGJhc2ljVGV4dCk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0YXJ0VUkoKXtcbiAgdmFyIF9zdGFydCA9IFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UoJ2ltYWdlcy9ydW4uanBnJyk7XG4gIHZhciBidG4gPSBuZXcgUElYSS5TcHJpdGUoX3N0YXJ0KTtcbiAgYnRuLnBvc2l0aW9uLnggPSA1MDtcbiAgYnRuLnBvc2l0aW9uLnkgPSAxMDtcbiAgYnRuLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgYnRuLmJ1dHRvbk1vZGUgPSB0cnVlO1xuICBidG4ub24oJ3BvaW50ZXJkb3duJywgcnVuKTtcbiAgc3RhZ2UuYWRkQ2hpbGQoYnRuKTtcbn1cblxuZnVuY3Rpb24gYWRkU3RvcFVJKCl7XG4gIHZhciBfc3RvcCA9IFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UoJ2ltYWdlcy9wYXVzZS5qcGcnKTtcbiAgdmFyIGJ0biA9IG5ldyBQSVhJLlNwcml0ZShfc3RvcCk7XG4gIGJ0bi5wb3NpdGlvbi54ID0gMTIwO1xuICBidG4ucG9zaXRpb24ueSA9IDEwO1xuICBidG4uaW50ZXJhY3RpdmUgPSB0cnVlO1xuICBidG4uYnV0dG9uTW9kZSA9IHRydWU7XG4gIGJ0bi5vbigncG9pbnRlcmRvd24nLCBwYXVzZSk7XG4gIHN0YWdlLmFkZENoaWxkKGJ0bik7XG59XG5cbmZ1bmN0aW9uIGFkZHNodWZmbGVVSSgpe1xuICB2YXIgX3NodWZmbGUgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKCdpbWFnZXMvc2h1ZmZsZS5qcGcnKTtcbiAgdmFyIGJ0biA9IG5ldyBQSVhJLlNwcml0ZShfc2h1ZmZsZSk7XG4gIGJ0bi5wb3NpdGlvbi54ID0gMjUwO1xuICBidG4ucG9zaXRpb24ueSA9IDEwO1xuICBidG4uaW50ZXJhY3RpdmUgPSB0cnVlO1xuICBidG4uYnV0dG9uTW9kZSA9IHRydWU7XG4gIGJ0bi5vbigncG9pbnRlcmRvd24nLCBidWlsZEJvYXJkKTtcbiAgc3RhZ2UuYWRkQ2hpbGQoYnRuKTtcbn1cblxuZnVuY3Rpb24gYWRkNXg1VUkoKXtcbiAgdmFyIF81eDUgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKCdpbWFnZXMvNXg1LmpwZycpO1xuICB2YXIgYnRuID0gbmV3IFBJWEkuU3ByaXRlKF81eDUpO1xuICBidG4ucG9zaXRpb24ueCA9IDQwMDtcbiAgYnRuLnBvc2l0aW9uLnkgPSAxMDtcbiAgYnRuLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgYnRuLmJ1dHRvbk1vZGUgPSB0cnVlO1xuICBidG4ub24oJ3BvaW50ZXJkb3duJywgZml2ZUJ5KTtcbiAgc3RhZ2UuYWRkQ2hpbGQoYnRuKTtcbn1cblxuZnVuY3Rpb24gYWRkNng2VUkoKXtcbiAgdmFyIF82eDYgPSBQSVhJLlRleHR1cmUuZnJvbUltYWdlKCdpbWFnZXMvNng2LmpwZycpO1xuICB2YXIgYnRuID0gbmV3IFBJWEkuU3ByaXRlKF82eDYpO1xuICBidG4ucG9zaXRpb24ueCA9IDUwMDtcbiAgYnRuLnBvc2l0aW9uLnkgPSAxMDtcbiAgYnRuLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgYnRuLmJ1dHRvbk1vZGUgPSB0cnVlO1xuICBidG4ub24oJ3BvaW50ZXJkb3duJywgc2l4QnkpO1xuICBzdGFnZS5hZGRDaGlsZChidG4pO1xufVxuXG5mdW5jdGlvbiBidWlsZEJvYXJkKCl7XG5cbiAgdmFyIGJsb2NrcyA9IG5ldyBQSVhJLlNwcml0ZShQSVhJLlRleHR1cmUuZnJvbUltYWdlKCdpbWFnZXMvdXBfYXJyb3cuanBnJykpO1xuICAvLyByZW1vdmUgYWxsIHNwcml0ZXMgYWZ0ZXIgdGhlIFVJIGJ1dHRvbnM7XG4gIHJlbW92ZVJhbmdlKDUsbnVtYmVyT2ZTcXVhcmVzKzYpO1xuICAvLyBDcmVhdGUgYSBncmlkIG9mIHNxdWFyZXM7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZTcXVhcmVzOyBpKyspIHtcbiAgICAgIC8vcmVwbGFjZSB0aGUgYXJyb3cgaW1hZ2UgYmFzZWQgb24gdGhlIHJhbmRvbSBzZWxlY3RvbiAwLTM7XG4gICAgICBibG9ja3MgPSBsb2FkUmFuZG9tQXJyb3coaSk7XG4gICAgICBibG9ja3MuYW5jaG9yLnNldCgwKTtcbiAgICAgIGJsb2Nrcy5wb3NpdGlvbi54ID0gKChpICUgUm93QW1vdW50KSAqIGJsb2NrX3NpemUpKzIwO1xuICAgICAgYmxvY2tzLnBvc2l0aW9uLnkgPSAoTWF0aC5mbG9vcihpIC8gUm93QW1vdW50KSAqIGJsb2NrX3NpemUpKzQwO1xuICAgICAgeHlBcnJheVtpXSA9IFtibG9ja3MucG9zaXRpb24ueCxibG9ja3MucG9zaXRpb24ueV1cbiAgICAgIHN0YWdlLmFkZENoaWxkKGJsb2Nrcyk7XG4gIH1cbiAgLy8gc3RvcmUgdGhlIG1heCBwb3NpdGlvbnMgZm9yIGxpbWl0cztcbiAgbWF4X3ggPSBibG9ja3MucG9zaXRpb24ueDtcbiAgbWF4X3kgPSBibG9ja3MucG9zaXRpb24ueTtcblxuICBhZGRDaGVja2VyKCk7XG5cbn1cblxuZnVuY3Rpb24gbG9hZFJhbmRvbUFycm93KGJsb2NrTnVtKXtcbiAgLy8gcGljayB0aGUgYXJyb3cgYmFzZWQgb24gdGhlIHJhbmRvbSBudW1iZXI7XG4gIHZhciBtaW4gPSAwO1xuICB2YXIgbWF4ID0gMztcbiAgdmFyIGFiID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcbiAgaWYoYWI9PTApe1xuICAgIG1hc3RlckFycmF5W2Jsb2NrTnVtXSA9IDA7XG4gICAgcmV0dXJuIG5ldyBQSVhJLlNwcml0ZShQSVhJLlRleHR1cmUuZnJvbUltYWdlKCdpbWFnZXMvdXBfYXJyb3cuanBnJykpO1xuICB9ZWxzZSBpZihhYj09MSl7XG4gICAgbWFzdGVyQXJyYXlbYmxvY2tOdW1dID0gMTtcbiAgICByZXR1cm4gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UoJ2ltYWdlcy9kbl9hcnJvdy5qcGcnKSk7XG4gIH1lbHNlIGlmKGFiPT0yKXtcbiAgICBtYXN0ZXJBcnJheVtibG9ja051bV0gPSAyO1xuICAgIHJldHVybiBuZXcgUElYSS5TcHJpdGUoUElYSS5UZXh0dXJlLmZyb21JbWFnZSgnaW1hZ2VzL2xlZnRfYXJyb3cuanBnJykpO1xuICB9ZWxzZSBpZihhYj09Myl7XG4gICAgbWFzdGVyQXJyYXlbYmxvY2tOdW1dID0gMztcbiAgICByZXR1cm4gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5mcm9tSW1hZ2UoJ2ltYWdlcy9yaWdodF9hcnJvdy5qcGcnKSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGFkZENoZWNrZXIoKXtcbiAgdmFyIHJhblBvcyA9IHNldFJhbmRvbVN0YXJ0UG9pbnQoKTtcbiAgc3RhZ2UucmVtb3ZlQ2hpbGQoYmFzaWNUZXh0KTtcbiAgY2hlY2tlci5hbmNob3Iuc2V0KDApO1xuICBjaGVja2VyLnBvc2l0aW9uLnggPSByYW5Qb3NbMF0rMjY7XG4gIGNoZWNrZXIucG9zaXRpb24ueSA9IHJhblBvc1sxXSs0NjtcbiAgY2hlY2tlci5pbnRlcmFjdGl2ZSA9IHRydWU7XG4gIGNoZWNrZXIuYnV0dG9uTW9kZSA9IHRydWU7XG4gIGNoZWNrZXIub24oJ3BvaW50ZXJkb3duJywgcnVuKTtcbiAgc3RhZ2UuYWRkQ2hpbGQoY2hlY2tlcik7XG59XG5cbmZ1bmN0aW9uIHJ1bigpe1xuICBzdGFydFN0b3AgPSB0cnVlO1xuICBzdGFnZS5yZW1vdmVDaGlsZChiYXNpY1RleHQpO1xuICBzdGFydE1vdmluZygpO1xufVxuXG5mdW5jdGlvbiBwYXVzZSgpe1xuICBzdGFydFN0b3AgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmFuZ2UocyxlKXtcbiAgLy8gY2xlYXIgdGhlIHNwcml0ZXMgc28gd2UgY2FuIHN0YXJ0IG92ZXI7XG4gIHN0YWdlLnJlbW92ZUNoaWxkcmVuKHMsZSk7XG59XG5cbmZ1bmN0aW9uIGZpdmVCeSgpe1xuICBudW1iZXJPZlNxdWFyZXMgPSAyNTtcbiAgUm93QW1vdW50ID0gTWF0aC5zcXJ0KG51bWJlck9mU3F1YXJlcyk7XG4gIHJlbW92ZVJhbmdlKDUsbnVtYmVyT2ZTcXVhcmVzKzYpXG4gIGJ1aWxkQm9hcmQoKTtcbn1cblxuZnVuY3Rpb24gc2l4QnkoKXtcbiAgbnVtYmVyT2ZTcXVhcmVzID0gMzY7XG4gIFJvd0Ftb3VudCA9IE1hdGguc3FydChudW1iZXJPZlNxdWFyZXMpO1xuICByZW1vdmVSYW5nZSg1LG51bWJlck9mU3F1YXJlcys2KTtcbiAgYnVpbGRCb2FyZCgpO1xufVxuXG5mdW5jdGlvbiBzZXRSYW5kb21TdGFydFBvaW50KCl7XG4gIC8vIHJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgeCBhbmQgeSBsb2NhdGlvbiBvZiB0aGUgcmFuZG9tIHN0YXJ0IHBvaW50O1xuICB2YXIgeHlBcnJheSA9IFtdO1xuICB2YXIgbWluID0gNTtcbiAgdmFyIG1heCA9IG51bWJlck9mU3F1YXJlcztcbiAgdmFyIHJhbmQgPSBNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluO1xuICB2YXIgYWIgPSBNYXRoLmZsb29yKHJhbmQpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZTcXVhcmVzOyBpKyspIHtcbiAgICAgIGlmKGkgPT0gYWIpe1xuICAgICAgICB4eUFycmF5WzBdID0gKChpICUgUm93QW1vdW50KSAqIGJsb2NrX3NpemUpKzI2O1xuICAgICAgICB4eUFycmF5WzFdID0gKE1hdGguZmxvb3IoaSAvIFJvd0Ftb3VudCkgKiBibG9ja19zaXplKSsyNjtcbiAgICAgICAgY2hlY2tlclN0YXJ0UG9zID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gIH1cbiAgcmV0dXJuIHh5QXJyYXk7XG59XG5cbmZ1bmN0aW9uIG1vdmVDaGVja2VyKF9wb3MsX2NoZWNrZXJTdGFydFBvcyl7XG4gIHZhciBuUG9zID0geHlBcnJheTtcbiAgLy8gbW92ZSBjaGVja2VyIHRvIGEgbmV3IHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBpbmRleCBudW1iZXIgMD11cCAxID0gZG93biAyPWxlZnQgMz1yaWdodDtcbiAgICBpZihfcG9zW19jaGVja2VyU3RhcnRQb3NdID09IDApe1xuICAgICAgY2hlY2tlci5wb3NpdGlvbi55ID0gY2hlY2tlci5wb3NpdGlvbi55LWJsb2NrX3NpemU7XG4gICAgfWVsc2UgaWYoX3Bvc1tfY2hlY2tlclN0YXJ0UG9zXSA9PSAxKXtcbiAgICAgIGNoZWNrZXIucG9zaXRpb24ueSA9IGNoZWNrZXIucG9zaXRpb24ueStibG9ja19zaXplO1xuICAgIH1lbHNlIGlmKF9wb3NbX2NoZWNrZXJTdGFydFBvc10gPT0gMil7XG4gICAgICBjaGVja2VyLnBvc2l0aW9uLnggPSBjaGVja2VyLnBvc2l0aW9uLngtYmxvY2tfc2l6ZTtcbiAgICB9ZWxzZSBpZihfcG9zW19jaGVja2VyU3RhcnRQb3NdID09IDMpe1xuICAgICAgY2hlY2tlci5wb3NpdGlvbi54ID0gY2hlY2tlci5wb3NpdGlvbi54K2Jsb2NrX3NpemU7XG4gICAgfVxuICAgIC8vY2hlY2sgbGltaXRzLiBJZiBpdCBnb2VzIG9mZiB0aGUgYm9hcmQgYWRkIGEgbmV3IGNoZWNrZXIgaW4gYSByYW5kb20gcG9zaXRvbjtcbiAgICBpZihjaGVja2VyLnBvc2l0aW9uLnggPiBtYXhfeCtibG9ja19zaXplKXtcbiAgICAgIGJsaXAucGxheSgpO1xuICAgICAgYWRkQ2hlY2tlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1lbHNlIGlmKGNoZWNrZXIucG9zaXRpb24ueSA+IG1heF95K2Jsb2NrX3NpemUpe1xuICAgICAgYmxpcC5wbGF5KCk7XG4gICAgICBhZGRDaGVja2VyKCk7XG4gICAgICByZXR1cm47XG4gICAgfWVsc2UgaWYoY2hlY2tlci5wb3NpdGlvbi54IDwgMCl7XG4gICAgICBibGlwLnBsYXkoKTtcbiAgICAgIGFkZENoZWNrZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9ZWxzZSBpZihjaGVja2VyLnBvc2l0aW9uLnkgPCAwKXtcbiAgICAgIGJsaXAucGxheSgpO1xuICAgICAgYWRkQ2hlY2tlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvcih2YXIgaT0wO2k8eHlBcnJheS5sZW5ndGg7aSsrKXtcbiAgICAgIHZhciBwb3NYWSA9IHh5QXJyYXlbaV07XG4gICAgICAvL2RldGVybWluZSB0aGUgYXJyb3cgYmxvY2sgaW5kZXggbnVtYmVyIGJhc2VkIG9uIHRoZSBuZXcgeCB5IHBvc2l0aW9uIG9mIHRoZSBjaGVja2VyO1xuICAgICAgaWYoKHBvc1hZWzBdIDw9Y2hlY2tlci5wb3NpdGlvbi54ICYmIGNoZWNrZXIucG9zaXRpb24ueCA8PSBwb3NYWVswXSArIGJsb2NrX3NpemUpICYmIChwb3NYWVsxXSA8PWNoZWNrZXIucG9zaXRpb24ueSAmJiBjaGVja2VyLnBvc2l0aW9uLnkgPD0gcG9zWFlbMV0gKyBibG9ja19zaXplKSl7XG4gICAgICAgIC8vc2V0IHRoZSBuZXcgaW5kZXggcG9zaXRpb24gdmFsdWU7XG4gICAgICAgIGNoZWNrZXJTdGFydFBvcyA9IGk7XG4gICAgICAgIGJsb29wLnBsYXkoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG59XG4iXX0=
